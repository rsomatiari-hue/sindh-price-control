<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Official Rate List - A4 Print</title>
    <style>
        /* A4 SETTINGS */
        @page { size: A4; margin: 10mm; }
        body { margin: 0; padding: 0; background: #f0f0f0; font-family: 'Arial', sans-serif; }
        
        .a4-container { 
            width: 210mm; 
            min-height: 297mm; 
            padding: 15mm; 
            margin: 20px auto; 
            background: white; 
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            box-sizing: border-box;
            position: relative;
            color: black;
        }

        /* OFFICIAL HEADER LIKE SCREENSHOT */
        .print-header { border-bottom: 4px double #000; padding-bottom: 10px; text-align: center; }
        .print-header h1 { font-size: 20px; margin: 0; letter-spacing: 1px; color: #000; }
        .print-header h2 { font-size: 35px; margin: 10px 0; font-weight: bold; }
        .dg-text { font-size: 12px; font-weight: bold; border-top: 1px solid #000; display: inline-block; padding-top: 5px; }

        /* DATA BAR */
        .info-bar { display: flex; justify-content: space-between; margin-top: 25px; font-size: 18px; border-bottom: 1px solid #000; padding-bottom: 8px; font-weight: bold; }

        /* RATES TABLE */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { background: #e0e0e0; border: 1.5px solid #000; padding: 12px; font-size: 20px; }
        td { border: 1.5px solid #000; padding: 12px; text-align: center; font-size: 18px; font-weight: bold; }
        .item-ur { text-align: right; padding-right: 15px; font-size: 20px; }

        /* FOOTER & VERIFICATION */
        .print-footer { margin-top: 60px; display: flex; justify-content: space-between; align-items: flex-end; }
        .qr-section { text-align: center; width: 150px; }
        .qr-section img { width: 100px; height: 100px; }
        .stamp-box { width: 250px; text-align: center; border-top: 2px solid #000; padding-top: 10px; font-weight: bold; }

        /* CONTROL BUTTON */
        .print-btn-box { position: fixed; top: 20px; right: 20px; z-index: 1000; }
        .p-btn { background: #000; color: #ffd700; padding: 15px 30px; border: 2px solid #ffd700; border-radius: 8px; cursor: pointer; font-weight: bold; }

        @media print {
            .print-btn-box { display: none; }
            body { background: none; }
            .a4-container { margin: 0; box-shadow: none; border: none; width: 100%; }
        }
    </style>
</head>
<body>

    <div class="print-btn-box">
        <button class="p-btn" onclick="window.print()">PRINT (A4 SIZE)</button>
    </div>

    <div class="a4-container">
        <div class="print-header">
            <h1>GOVERNMENT OF SINDH</h1>
            <h2>روزانہ سرکاری نرخ نامہ</h2>
            <div class="dg-text">DIRECTOR GENERAL AGRICULTURE MARKETING SINDH</div>
        </div>

        <div class="info-bar">
            <div>مارکیٹ: <span id="p_mkt">---</span></div>
            <div>تاریخ: <span id="p_date">---</span></div>
            <div>کیٹیگری: <span id="p_cat">---</span></div>
        </div>

        <table>
            <thead>
                <tr>
                    <th width="10%">نمبر</th>
                    <th width="60%">آئٹم کا نام</th>
                    <th width="30%">سرکاری ریٹ</th>
                </tr>
            </thead>
            <tbody id="p_table">
                </tbody>
        </table>

        <div class="print-footer">
            <div class="qr-section">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=VerifiedSindhGovtRates" alt="QR">
                <p style="font-size: 10px; margin: 5px 0;">تصدیق کے لیے اسکین کریں</p>
            </div>
            <div class="stamp-box">
                سیکریٹری / ایڈمنسٹریٹر<br>مارکیٹ کمیٹی سندھ
            </div>
        </div>
    </div>

    <script>
        window.onload = function() {
            // Memory se data recover karna
            const mkt = localStorage.getItem("print_market") || "Karachi";
            const cat = localStorage.getItem("print_category") || "Vegetables";
            const items = JSON.parse(localStorage.getItem("print_items")) || [];
            const date = "22 جنوری، 2026";

            document.getElementById("p_mkt").innerText = mkt;
            document.getElementById("p_cat").innerText = cat;
            document.getElementById("p_date").innerText = date;

            let html = "";
            items.forEach((item, index) => {
                html += `<tr>
                    <td>${index + 1}</td>
                    <td class="item-ur">${item.name}</td>
                    <td>${item.price}</td>
                </tr>`;
            });
            document.getElementById("p_table").innerHTML = html;
        }
    </script>
</body>
</html>
