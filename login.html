<script>
    // AAPKA FINAL VERSION 10 URL
    const sheetURL = "https://script.google.com/macros/s/AKfycbyF3H19bi79J8_qv1d5ItMStO_cYI3ehsfuVU72JDRbPJewgSq0qYAmn7lZSD6rVfNhSA/exec"; 

    function handleLogin() {
        const mobile = document.getElementById('mobileNumber').value.trim();
        const pass = document.getElementById('password').value.trim();
        
        // JSONP Jadu (Version 10 ke saath)
        const script = document.createElement('script');
        script.src = `${sheetURL}?action=login&mobile=${mobile}&pass=${pass}&callback=loginResponse`;
        document.body.appendChild(script);
    }

    window.loginResponse = function(result) {
        if (result.status === "success") {
            localStorage.setItem("userRole", result.role);
            localStorage.setItem("userCity", result.city);
            // Mubarik ho! Dashboard khul gaya
            window.location.href = "complaints-list.html";
        } else {
            alert("Ghalat Mobile ya Password!");
            location.reload();
        }
    }
</script>
