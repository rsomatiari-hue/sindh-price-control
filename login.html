<script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbwUkNKtlw09iCloOAul_QEv0UDcpauWowCN2JIc0ZiEkhi4fYKxTW_o5AzTES-CHc35Ag/exec";

    async function doLogin() {
        const email = document.getElementById('userEmail').value.trim();
        const pass = document.getElementById('userPass').value.trim();
        const msg = document.getElementById('msg');

        try {
            const response = await fetch(`${scriptURL}?email=${encodeURIComponent(email)}&pass=${encodeURIComponent(pass)}`);
            const result = await response.json();

            if (result.status === "success") {
                localStorage.setItem("userRole", result.role);
                localStorage.setItem("userMarket", result.market);
                
                // Aapki files ke mutabiq redirection
                if (result.role.toLowerCase() === "admin") {
                    window.location.href = "admin-panel.html";
                } else {
                    window.location.href = "officer-dashboard.html";
                }
            } else {
                msg.innerText = "Ghalat Email ya Password!";
            }
        } catch (e) { msg.innerText = "Server Error!"; }
    }
</script>
