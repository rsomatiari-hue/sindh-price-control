<!DOCTYPE html>
<html lang="ur-pk" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Official Price List - Govt of Sindh</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        @page { size: A4; margin: 0; }
        body { font-family: 'Arial', sans-serif; background: #555; margin: 0; padding: 0; }
        
        .a4-page {
            background: white; width: 210mm; min-height: 297mm;
            padding: 15mm; margin: 10mm auto; box-sizing: border-box;
            border: 2px solid #000; position: relative;
        }

        .gov-header { text-align: center; border-bottom: 3px solid #1a5276; margin-bottom: 10px; padding-bottom: 5px; }
        .gov-title { font-size: 28px; color: #1a5276; margin: 2px 0; font-weight: bold; }
        .sub-title { font-size: 16px; margin: 0; font-weight: bold; color: #000; }
        
        .info-bar { display: flex; justify-content: space-between; margin: 15px 0; font-weight: bold; border-bottom: 2px solid #000; padding-bottom: 8px; font-size: 18px; }

        .section-header { background: #1a5276; color: white; padding: 12px; font-weight: bold; text-align: center; margin: 15px 0; font-size: 22px; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { background: #f2f2f2; padding: 10px; font-size: 16px; border: 2px solid #000; }
        td { border: 2px solid #000; padding: 10px; text-align: center; font-size: 18px; font-weight: bold; }

        .legal-notice { 
            border: 2px solid #c0392b; background: #fff3f3; padding: 15px; 
            margin-top: 30px; font-size: 13px; line-height: 1.6; color: #000; text-align: right;
        }

        .footer { position: absolute; bottom: 15mm; left: 15mm; right: 15mm; display: flex; justify-content: space-between; align-items: center; border-top: 2px solid #1a5276; padding-top: 10px; }

        .no-print { background: #222; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; }
        .btn { padding: 12px 25px; background: #27ae60; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; font-size: 16px; }

        @media print {
            body { background: none; }
            .a4-page { margin: 0; border: none; width: 100%; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>

<div class="no-print">
    <button class="btn" onclick="window.print()">ğŸ–¨ï¸ Print / Save as PDF (A4)</button>
    <button class="btn" style="background:#1a5276;" onclick="window.history.back()">â¬…ï¸ Back</button>
</div>

<div class="a4-page">
    <div class="gov-header">
        <p style="margin:0; font-size: 18px;">Ø­Ú©ÙˆÙ…Øª Ø³Ù†Ø¯Ú¾</p>
        <h1 class="gov-title">Ø±ÙˆØ²Ø§Ù†Û Ø³Ø±Ú©Ø§Ø±ÛŒ Ù†Ø±Ø® Ù†Ø§Ù…Û</h1>
        <p class="sub-title">Director General Agriculture Marketing, Hyderabad</p>
    </div>

    <div class="info-bar">
        <span>ØªØ§Ø±ÛŒØ®: <span id="currentDate"></span></span>
        <span>Ù…Ø§Ø±Ú©ÛŒÙ¹: <span id="mNameDisplay"></span></span>
        <span>Ú©ÛŒÙ¹ÛŒÚ¯Ø±ÛŒ: <span id="cNameDisplay"></span></span>
    </div>

    <div class="section-header" id="listTitle">Price List</div>

    <table>
        <thead>
            <tr>
                <th width="10%">Ù†Ù…Ø¨Ø±</th>
                <th width="60%">Ø¢Ø¦Ù¹Ù… Ú©Ø§ Ù†Ø§Ù… (Item Name)</th>
                <th width="30%">Ù†Ø±Ø® (Official Rate)</th>
            </tr>
        </thead>
        <tbody id="printTableBody">
            </tbody>
    </table>

    <div class="legal-notice">
        <strong>âš ï¸ Ø¶Ø±ÙˆØ±ÛŒ Ù‚Ø§Ù†ÙˆÙ†ÛŒ Ù†ÙˆÙ¹ (Price Control Act):</strong>
        <p style="margin:5px 0 0;">Ù¾Ø±Ø§Ø¦Ø³ Ú©Ù†Ù¹Ø±ÙˆÙ„ Ø§ÛŒÚ©Ù¹ Ú©Û’ ØªØ­Øª ÛŒÛ Ù„Ø³Ù¹ Ø¯Ú©Ø§Ù† Ù¾Ø± Ù†Ù…Ø§ÛŒØ§Úº Ø¬Ú¯Û Ø¢ÙˆÛŒØ²Ø§Úº Ú©Ø±Ù†Ø§ Ù„Ø§Ø²Ù…ÛŒ ÛÛ’Û” Ù„Ø³Ù¹ Ø¢ÙˆÛŒØ²Ø§Úº Ù†Û Ú©Ø±Ù†Û’ ÛŒØ§ Ø³Ø±Ú©Ø§Ø±ÛŒ Ù†Ø±Ø® Ø³Û’ Ø²Ø§Ø¦Ø¯ Ù‚ÛŒÙ…Øª ÙˆØµÙˆÙ„ Ú©Ø±Ù†Û’ Ù¾Ø± Ø¨Ú¾Ø§Ø±ÛŒ Ø¬Ø±Ù…Ø§Ù†ÛØŒ Ø¯Ú©Ø§Ù† Ø³ÛŒÙ„ Ø§ÙˆØ± Ù‚ÛŒØ¯ Ú©ÛŒ Ø³Ø²Ø§ Ø¯ÛŒ Ø¬Ø§Ø¦Û’ Ú¯ÛŒÛ” Ø¹ÙˆØ§Ù… Ø§Ù„Ù†Ø§Ø³ Ú©Ø³ÛŒ Ø¨Ú¾ÛŒ Ø´Ú©Ø§ÛŒØª Ú©ÛŒ ØµÙˆØ±Øª Ù…ÛŒÚº Ù†ÛŒÚ†Û’ Ø¯ÛŒÛ’ Ú¯Ø¦Û’ QR Ú©ÙˆÚˆ Ú©Ùˆ Ø§Ø³Ú©ÛŒÙ† Ú©Ø± Ú©Û’ ÙÙˆØ±ÛŒ Ø§Ø·Ù„Ø§Ø¹ Ø¯ÛŒÚºÛ”</p>
    </div>

    <div class="footer">
        <div id="qrcode"></div>
        <div style="text-align: left; font-size: 11px; width: 75%; line-height: 1.3;">
            <p style="margin:0; font-weight:bold; color:#1a5276;">This list is issued by: Digital Price Control System</p>
            <p style="margin:2px 0;">Under the control of: <strong>Director General Agriculture Marketing, Hyderabad, Government of Sindh.</strong></p>
            <p style="margin:0; font-style:italic; color:#c0392b;">Verified via QR Code. Computer generated official report. No physical signature required.</p>
        </div>
    </div>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const market = urlParams.get('market');
    const category = urlParams.get('cat');

    document.getElementById('mNameDisplay').innerText = market;
    document.getElementById('cNameDisplay').innerText = category;
    document.getElementById('listTitle').innerText = category + " List";
    document.getElementById('currentDate').innerText = new Date().toLocaleDateString('en-GB');

    const scriptURL = "https://script.google.com/macros/s/AKfycbyyiJucwJX3NOFtfTnq6SG94YCxxXArmhgvUdya9RiiKMo_a2ssxxg2QQgTwDKMZ8_8rw/exec";

    async function loadPrintData() {
        try {
            const response = await fetch(scriptURL);
            const data = await response.json();
            const tableBody = document.getElementById('printTableBody');
            
            const filtered = data.filter(r => r.Market_Committee === market && r.Category === category);

            filtered.forEach((item, index) => {
                tableBody.innerHTML += `<tr><td>${index + 1}</td><td>${item.Item_Name}</td><td>Rs. ${item.Rate}</td></tr>`;
            });

            // Generate QR Code that points back to the HOME page for verification
            new QRCode(document.getElementById("qrcode"), { 
                text: "https://your-github-link.github.io/", // Yahan apna main Github link dalen
                width: 90, 
                height: 90 
            });

        } catch (e) {
            console.error("Error loading data");
        }
    }

    window.onload = loadPrintData;
</script>

</body>
</html>
