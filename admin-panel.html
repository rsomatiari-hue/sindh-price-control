<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN PANEL - SINDH PRICE CONTROL</title>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; margin: 0; }
        .sidebar { width: 250px; background: #1a5276; height: 100vh; position: fixed; color: white; padding: 20px; }
        .main-content { margin-right: 250px; padding: 30px; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
        input, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #27ae60; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; }
        .nav-links a { display: block; color: white; text-decoration: none; padding: 10px; margin: 5px 0; background: rgba(255,255,255,0.1); border-radius: 5px; }
        .nav-links a:hover { background: #2ecc71; }
    </style>
</head>
<body>

<div class="sidebar">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/be/Emblem_of_Sindh.svg/1200px-Emblem_of_Sindh.svg.png" width="60">
    <h2>Ø§ÛŒÚˆÙ…Ù† Ú©Ù†Ù¹Ø±ÙˆÙ„</h2>
    <hr>
    <div class="nav-links">
        <a href="monitor.html">ğŸ“Š Ù…Ø§Ù†ÛŒÙ¹Ø±Ù†Ú¯</a>
        <a href="view-rates.html">ğŸ“‘ Ø±ÛŒÙ¹ Ù„Ø³Ù¹</a>
        <a href="print-list.html">ğŸ–¨ï¸ Ù¾Ø±Ù†Ù¹ Ù„Ø³Ù¹</a>
        <a href="admin-panel.html">ğŸ‘¤ Ø¢ÙÛŒØ³Ø± Ø±Ø¬Ø³Ù¹Ø±ÛŒØ´Ù†</a>
    </div>
    <button onclick="logout()" style="background:#e74c3c; margin-top:20px;">Ù„Ø§Ú¯ Ø¢Ø¤Ù¹</button>
</div>

<div class="main-content">
    <h1>Ø³Ù†Ø¯Ú¾ Ù¾Ø±Ø§Ø¦Ø³ Ú©Ù†Ù¹Ø±ÙˆÙ„ Ø§ÛŒÚˆÙ…Ù†Ø³Ù¹Ø±ÛŒØ´Ù†</h1>
    
    <div class="card">
        <h3>Ù†ÛŒØ§ Ø¢ÙÛŒØ³Ø± Ø±Ø¬Ø³Ù¹Ø± Ú©Ø±ÛŒÚº (Add New Officer)</h3>
        <p style="color: #666; font-size: 13px;">Ù†ÙˆÙ¹: Ù…ÙˆØ¨Ø§Ø¦Ù„ Ù†Ù…Ø¨Ø± 03 Ø³Û’ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº (Ù…Ø«Ù„Ø§Ù‹ 03469990100)</p>
        
        <input type="text" id="newName" placeholder="Ø¢ÙÛŒØ³Ø± Ú©Ø§ Ù†Ø§Ù…">
        <input type="number" id="newMobile" placeholder="Ù…ÙˆØ¨Ø§Ø¦Ù„ Ù†Ù…Ø¨Ø±">
        <input type="text" id="newPass" placeholder="Ù¾Ø§Ø³ ÙˆØ±Úˆ">
        <input type="text" id="newMarket" placeholder="Ù…Ø§Ø±Ú©ÛŒÙ¹ / Ø¹Ù„Ø§Ù‚Û">
        
        <button onclick="registerOfficer()" id="regBtn">Ø¢ÙÛŒØ³Ø± ÚˆÛŒÙ¹Ø§ Ù…Ø­ÙÙˆØ¸ Ú©Ø±ÛŒÚº</button>
        <div id="regMsg" style="margin-top:10px; font-weight:bold;"></div>
    </div>
</div>

<script>
    // Security Check
    if(localStorage.getItem("userRole") !== "Admin") { window.location.href = "login.html"; }

    // Google Script URL
    const scriptURL = "https://script.google.com/macros/s/AKfycbwUkNKtlw09iCloOAul_QEv0UDcpauWowCN2JIc0ZiEkhi4fYKxTW_o5AzTES-CHc35Ag/exec";

    async function registerOfficer() {
        const name = document.getElementById('newName').value;
        const mobile = document.getElementById('newMobile').value;
        const pass = document.getElementById('newPass').value;
        const market = document.getElementById('newMarket').value;
        const msg = document.getElementById('regMsg');

        if(!name || !mobile || !pass || !market) {
            msg.innerText = "ØªÙ…Ø§Ù… Ø®Ø§Ù†Û’ Ù¾ÙØ± Ú©Ø±ÛŒÚº!";
            return;
        }

        msg.style.color = "blue";
        msg.innerText = "ÚˆÛŒÙ¹Ø§ Ø¨Ú¾ÛŒØ¬Ø§ Ø¬Ø§ Ø±ÛØ§ ÛÛ’...";

        // Mobile number ke sath ' (comma) lagana taake Google Sheet zero na mita sakay
        const formattedMobile = "'" + mobile;

        const formData = new FormData();
        formData.append('action', 'register');
        formData.append('name', name);
        formData.append('mobile', formattedMobile);
        formData.append('pass', pass);
        formData.append('market', market);

        try {
            await fetch(scriptURL, { method: 'POST', body: formData });
            msg.style.color = "green";
            msg.innerText = "Ø¢ÙÛŒØ³Ø± Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ Ø§ÛŒÚˆ ÛÙˆ Ú¯ÛŒØ§!";
            // Form clear
            document.getElementById('newName').value = "";
            document.getElementById('newMobile').value = "";
            document.getElementById('newPass').value = "";
            document.getElementById('newMarket').value = "";
        } catch(e) {
            msg.style.color = "red";
            msg.innerText = "Ø§ÛŒØ±Ø±! Ø¯ÙˆØ¨Ø§Ø±Û Ú©ÙˆØ´Ø´ Ú©Ø±ÛŒÚºÛ”";
        }
    }

    function logout() {
        localStorage.clear();
        window.location.href = "login.html";
    }
</script>

</body>
</html>
