<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سندھ سرکاری ریٹ لسٹ - عوام کے لیے</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f0f4f8; margin: 0; padding-bottom: 80px; text-align: right; }
        .top-nav { background: #2e7d32; color: white; padding: 15px; text-align: center; }
        
        /* City Selector Styling */
        .city-selector { background: #1b5e20; padding: 10px; display: flex; justify-content: center; gap: 10px; align-items: center; }
        .city-select { background: white; color: #333; padding: 8px; border-radius: 8px; border: none; font-weight: bold; width: 60%; }

        .search-container { padding: 15px; background: #fff; border-bottom: 1px solid #ddd; position: sticky; top: 0; z-index: 100; }
        .search-box { width: 100%; padding: 12px; border: 1.5px solid #2e7d32; border-radius: 10px; font-size: 15px; outline: none; }

        /* Action Buttons (Download/Share) */
        .action-bar { display: flex; justify-content: space-around; padding: 10px; background: white; border-bottom: 1px solid #eee; }
        .action-btn { background: #f9f9f9; border: 1px solid #ddd; padding: 10px 15px; border-radius: 10px; font-size: 13px; color: #333; cursor: pointer; display: flex; align-items: center; gap: 5px; }
        .action-btn i { color: #2e7d32; font-size: 16px; }

        .price-list { padding: 15px; }
        .price-card { background: white; margin-bottom: 8px; padding: 12px; border-radius: 10px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .price-tag { color: #2e7d32; font-weight: bold; font-size: 18px; }

        @media print { .top-nav, .city-selector, .search-container, .action-bar, .complaint-btn { display: none; } }
    </style>
</head>
<body>

    <div class="top-nav">
        <h3 style="margin:0;">سندھ پرائس کنٹرول</h3>
        <small id="todayDate"></small>
    </div>

    <div class="city-selector">
        <span style="color:white; font-size: 14px;">اپنا شہر منتخب کریں:</span>
        <select class="city-select" id="cityChoose" onchange="updateCityData()">
            <option value="Matiari">مٹیاری (Matiari)</option>
            <option value="Kazi Ahmed">قاضی احمد (Kazi Ahmed)</option>
            <option value="Hyderabad">حیدرآباد (Hyderabad)</option>
        </select>
    </div>

    <div class="action-bar">
        <button class="action-btn" onclick="window.print()"><i class="fas fa-print"></i> پرنٹ</button>
        <button class="action-btn" onclick="shareToWhatsApp()"><i class="fab fa-whatsapp"></i> واٹس ایپ</button>
        <button class="action-btn" onclick="downloadImage()"><i class="fas fa-download"></i> ڈاؤن لوڈ</button>
    </div>

    <div class="search-container">
        <input type="text" class="search-box" id="searchInput" onkeyup="searchItems()" placeholder="چیز کا نام تلاش کریں...">
    </div>

    <div class="price-list" id="publicList"></div>

    <script>
        // Mix Data for testing
        const ratesData = {
            "Matiari": [ {n: "آلو", p: "65"}, {n: "پیاز", p: "160"}, {n: "ٹماٹر", p: "90"} ],
            "Kazi Ahmed": [ {n: "آلو", p: "60"}, {n: "پیاز", p: "150"}, {n: "ٹماٹر", p: "80"} ],
            "Hyderabad": [ {n: "آلو", p: "70"}, {n: "پیاز", p: "180"}, {n: "ٹماٹر", p: "100"} ]
        };

        function updateCityData() {
            const city = document.getElementById('cityChoose').value;
            const data = ratesData[city];
            const list = document.getElementById('publicList');
            list.innerHTML = "";
            data.forEach(item => {
                list.innerHTML += `
                    <div class="price-card">
                        <span><b>${item.n}</b></span>
                        <span class="price-tag">Rs. ${item.p}</span>
                    </div>`;
            });
        }

        function shareToWhatsApp() {
            const city = document.getElementById('cityChoose').value;
            const text = `آج کے سرکاری ریٹ (${city}):\nآلو: Rs. 60\nپیاز: Rs. 150\nمزید معلومات کے لیے ویب سائٹ دیکھیں!`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`);
        }

        function searchItems() {
            let input = document.getElementById('searchInput').value.toLowerCase();
            let cards = document.getElementsByClassName('price-card');
            for (let card of cards) {
                card.style.display = card.innerText.toLowerCase().includes(input) ? "flex" : "none";
            }
        }

        window.onload = function() {
            document.getElementById('todayDate').innerText = new Date().toLocaleDateString('ur-PK');
            updateCityData();
        }
    </script>
</body>
</html>
